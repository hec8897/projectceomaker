String.prototype.replaceAll = function (org, dest) {
  //array fillter prototype
  return this.split(org).join(dest);
};

var HtmlMokup = {
  Main: {
    main: "index.html"
  },
  Service: {
    main: "service_design.html?cate=0&pageno=0",
    design: "service_design.html?cate=0&pageno=0",
    marketing: "service_marketing.html?cate=0&pageno=1",
    academy: "service_academy.html?cate=0&pageno=2",
    consulting: "service_consulting.html?cate=0&pageno=3"
  },
  Works: {
    main: "works_list.html?cate=1",
    List: "works_list.html?cate=2"
  },
  Contact: {
    main: "contact.html?cate=2&pageno=0",
    design: "contact_design.html?cate=2&pageno=1",
    marketing: "contact_marketing.html?cate=2&pageno=2",
    consulting: "contact_consulting.html?cate=2&pageno=3",
    academy: "contact_academy.html?cate=2&pageno=4"
  },
  About: {
    main: "about.html?cate=3"
  }
};
var navMokupRender = {
  // HeaderRender() {
  //     const Gnb = document.getElementsByClassName('gnb')[0];
  //     Gnb.innerHTML = `<nav>
  //                             <div class="ci"><a href="${HtmlMokup.Main.main}"><img src="images/ci_white.png" alt="ceomaker"></a></div>
  //                             <a href="${HtmlMokup.Service.main}">SERVICE</a>
  //                             <a href="${HtmlMokup.Works.main}">WORKS</a>
  //                             <a href="${HtmlMokup.Contact.main}">CONTACT</a>
  //                             <a href="${HtmlMokup.About.main}">ABOUT</a>
  //                         </nav>`
  // },
  HeaderRender: function HeaderRender() {
    var Gnb = document.getElementsByClassName('gnb')[0];
    Gnb.innerHTML = "\n        <nav>\n        <div class=\"ci\"><a href=\"" + HtmlMokup.Main.main + "\"><img src=\"images/ci_white.png\" alt=\"ceomaker\"></a></div>        \n        <div class=\"dropdown\">\n            <div>\n                <a href=\"" + HtmlMokup.Service.main + "\" class=\"gnbm\">SERVICE</a>\n            </div>\n            <!-- sub -->\n            <div class=\"sub_box\">\n                <div class=\"depth\">\n                <a href=\"" + HtmlMokup.Service.design + "\">design</a>\n                <a href=\"" + HtmlMokup.Service.marketing + "\">marketing</a>\n                <a href=\"" + HtmlMokup.Service.academy + "\">academy</a>\n                <a href=\"" + HtmlMokup.Service.consulting + "\">consulting</a>\n                </div>\n            </div>\n        </div>\n        <div class=\"dropdown\">\n            <div>\n                <a href=\"" + HtmlMokup.Works.main + "\" class=\"gnbm\">WORKS</a>\n            </div>\n        </div>\n        <div class=\"dropdown\">\n            <div>\n                <a href=\"" + HtmlMokup.Contact.main + "\" class=\"gnbm\">CONTACT</a>\n            </div>\n            <!-- sub -->\n            <div class=\"sub_box\">\n                <div class=\"depth\">\n                    <a href=\"" + HtmlMokup.Contact.design + "\">design</a>\n                    <a href=\"" + HtmlMokup.Contact.marketing + "\">marketing</a>\n                    <a href=\"" + HtmlMokup.Contact.academy + "\">academy</a>\n                    <a href=\"" + HtmlMokup.Contact.consulting + "\">consulting</a>\n                </div>\n            </div>\n        </div>\n        <div class=\"dropdown\">\n            <div>\n                <a href=\"" + HtmlMokup.About.main + "\" class=\"gnbm\">ABOUT</a>\n            </div>\n        </div>\n    </nav>";
  },
  SideBarNav: function SideBarNav() {
    this.getQueryString();
    var SideBarService = document.querySelectorAll('.s_lnb');
    var ciLnb = document.querySelectorAll('.ci_lnb');

    var _lnb = document.querySelectorAll('.h_lnb'); // _lnb[0].setAttribute('href',HtmlMokup.Main.main)


    for (var i = 0; i < ciLnb.length; i++) {
      ciLnb[i].setAttribute('href', HtmlMokup.Main.main);
    }

    if (params.cate != undefined) {
      for (var _i = 0; _i < _lnb.length; _i++) {
        _lnb[_i].classList = 'h_lnb';
      }

      _lnb[params.cate].className = 'h_lnb on';
    }

    _lnb[0].setAttribute('href', HtmlMokup.Service.main);

    _lnb[1].setAttribute('href', HtmlMokup.Works.main);

    _lnb[2].setAttribute('href', HtmlMokup.Contact.main);

    _lnb[3].setAttribute('href', HtmlMokup.About.main);

    SideBarService[0].innerHTML = "<li><a href=\"" + HtmlMokup.Service.design + "\">design</a></li>\n                                       <li><a href=\"" + HtmlMokup.Service.marketing + "\">marketing</a></li>\n                                       <li><a href=\"" + HtmlMokup.Service.academy + "\">academy</a></li>\n                                       <li><a href=\"" + HtmlMokup.Service.consulting + "\">consulting</a></li>";
    SideBarService[1].innerHTML = "<li><a href=\"" + HtmlMokup.Contact.design + "\">design</a></li>\n                                        <li><a href=\"" + HtmlMokup.Contact.marketing + "\">marketing</a></li>\n                                        <li><a href=\"" + HtmlMokup.Contact.academy + "\">academy</a></li>\n                                        <li><a href=\"" + HtmlMokup.Contact.consulting + "\">consulting</a></li>";
  },
  getQueryString: function getQueryString() {
    //Get QueryString
    params = {};
    window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (str, key, value) {
      params[key] = value;
    });
    return params;
  },
  ActiveNav: function ActiveNav() {
    if (params.pageno != undefined) {
      var ServiceTabNavList = document.querySelectorAll('.sub_nav');
      ServiceTabNavList[params.pageno].className = 'sub_nav on';
    }
  },
  ServiceTabNav: function ServiceTabNav() {
    this.getQueryString();
    var ServiceTabNavHtml = document.querySelectorAll('.wid_4');
    var Activeclass = "on";

    if (ServiceTabNavHtml.length > 0) {
      ServiceTabNavHtml[0].innerHTML = "  <li><a href=\"" + HtmlMokup.Service.design + "\" class='sub_nav'>DESIGN</a></li>\n                                            <li><a href=\"" + HtmlMokup.Service.marketing + "\" class='sub_nav'>MARKETING</a></li>\n                                            <li><a href=\"" + HtmlMokup.Service.academy + "\" class='sub_nav'>ACADEMY</a></li>\n                                            <li><a href=\"" + HtmlMokup.Service.consulting + "\" class='sub_nav'>CONSULTING</a></li>";
      this.ActiveNav();
    }
  },
  ContactTabNav: function ContactTabNav() {
    this.getQueryString();
    var ContactTabNavHtml = document.querySelectorAll('.wid_5');

    if (ContactTabNavHtml.length > 0) {
      ContactTabNavHtml[0].innerHTML = " <li><a href=\"" + HtmlMokup.Contact.main + "\" class=\"sub_nav\">1:1 \uBB38\uC758</a></li>\n                                                <li><a href=\"" + HtmlMokup.Contact.design + "\" class=\"sub_nav\">\uB514\uC790\uC778 \uBB38\uC758</a></li>\n                                                <li><a href=\"" + HtmlMokup.Contact.marketing + "\" class=\"sub_nav\">\uB9C8\uCF00\uD305 \uBB38\uC758</a></li>\n                                                <li><a href=\"" + HtmlMokup.Contact.consulting + "\" class=\"sub_nav\">\uCEE8\uC124\uD305 \uBB38\uC758</a></li>\n                                                <li><a href=\"" + HtmlMokup.Contact.academy + "\" class=\"sub_nav\">\uC544\uCE74\uB370\uBBF8 \uBB38\uC758</a></li>";
    }

    this.ActiveNav();
  }
};
var _WorkDataRender = {
  WorkData: [],
  WorkDataRender: function WorkDataRender(page) {
    var xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        _WorkDataRender.WorkData = JSON.parse(this.response).result;
        var WorkListHtml = document.getElementById('work_list');
        var WorkData = _WorkDataRender.WorkData;
        TemplateArray = []; // <div style="color:${WorkData[i].fontColor}">${WorkData[i].work}</div>

        for (var i = 0; i < WorkData.length; i++) {
          if (WorkData[i].port == 1) {
            portlink = "works_view.html?id=" + WorkData[i].idx;
          } else {
            portlink = 'javascirt:void()';
          }

          TemplateArray.push("<div data-scrollview=\"true\">\n                        <div style=\"background:url(admin" + WorkData[i].background.replace("..", "") + ") center;\" \"background-size:auto 100%;\" class=\"animated work_lists\" data-animation=\"true\" data-animation-type=\"fadeInUp\">\n                            <a href=\"" + portlink + "\">\n                                <div class=\"work_on\">\n                                    <div class=\"more_tag btn btn_w\" >REAN MORE<div class=\"pluarotate\"><span></span><span></span></div></div>\n                                </div>\n                                <div class=\"work_con\">\n                                <p style=\"color:" + WorkData[i].fontColor + "\">" + WorkData[i].subTit + "</p>\n                                <h2 style=\"color:" + WorkData[i].fontColor + "\">" + WorkData[i].mainTit + "</h2>\n                                </div>\n                                <img src=\"images/img_dim.gif\" alt=\"dim\">\n                            </a>\n                        </div>\n                    </div>");
        }

        var limitList = page == 'main' ? 8 : 9;
        var limitArray = TemplateArray.slice(0, WorkData.length);

        if (page == "main") {
          limitArray.push("<div data-scrollview=\"true\">\n                        <div style=\"background:url(images/works_more.jpg) center;\" class=\"animated delay_4\" data-animation=\"true\" data-animation-type=\"fadeInUp\">\n                            <a href=\"works_view.html?id=" + HtmlMokup.Works + "\">\n                                <div class=\"work_more\">\n                                    <h4>MORE PROJECT</h4>\n                                    <div class=\"pluarotate\"><span></span><span></span></div>\n                                </div>\n                                <img src=\"images/img_dim.gif\" alt=\"dim\">\n                            </a>\n                        </div>\n                    </div>");
        }

        var resultArrayHtml = limitArray.toString();
        var replaceAll1 = resultArrayHtml.replaceAll(',', '');
        var replaceAll2 = replaceAll1.replaceAll('|', ',');
        var replaceAll3 = replaceAll2.replaceAll(null, ' ');
        WorkListHtml.innerHTML = replaceAll3;
        var WorkList = document.querySelectorAll('.work_lists');
        var MoreBtn = document.querySelectorAll('.more_tag');

        // for (var _i2 = 5; _i2 < MoreBtn.length; _i2++) {
        //   MoreBtn[_i2].classList = "";
        // }

        for (var _i3 = limitList; _i3 < WorkList.length; _i3++) {
          WorkList[_i3].style.display = "none";
        } 

      }
    };

    xhttp.open('POST', 'data/works.data.php', true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("data=0");
  },
  moreDataCount: 9,
  moreDataRender: function moreDataRender() {
    var WorkList = document.querySelectorAll('.work_lists');
    var workLoading = document.getElementById('work_loading');
    var limitCount = this.moreDataCount;

    if (limitCount < WorkList.length) {
      for (var i = limitCount; i < limitCount + 3; i++) {
        $(WorkList[i]).fadeIn(); //스크롤 이벤트 걸어줘야함
        // WorkList[i].style.display="block"
      }

      this.moreDataCount += 3;

      if (WorkList.length <= this.moreDataCount) {
        this.moreDataCount = WorkList.length;
      }
    } else {
      workLoading.style.opacity = '0';
    }
  },
  WorkViewPage: function WorkViewPage() {
    var WorkHead = document.getElementById('workhead');
    var WorksImg = document.getElementById('works_area');
    var xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var RetrunJson = JSON.parse(this.responseText);
        var ViewData = RetrunJson.result[0];
        WorkHead.innerHTML = "<div>\n                <h6>PROJECT</h6>\n                <p>" + ViewData.project + "</p>\n            </div>\n            <div>\n                <h6>CLIENT</h6>\n                <p>" + ViewData.company + "</p>\n            </div>\n            <div>\n                <h6>PERIOD</h6>\n                <p>" + ViewData.Period + "</p>\n            </div>\n            <div>\n                <h6>CONTENTS</h6>\n                <div>\n                    <h1>" + ViewData.mainTit + "</h1>\n                    <p>" + ViewData.subTit + "</p>\n                    <a href=\"\" class=\"btn\">\uBC29\uBB38\uD558\uAE30 <div class=\"pluarotate\"><span></span><span></span></div></a>\n                </div>\n            </div>";
        WorksImg.innerHTML = "<img src=\"admin/" + ViewData.mainRoute.replace("..", "") + "\" alt=\"works img\">";
      }
    };

    Insertdata = {
      id: params.id,
      mode: "View"
    };
    xhttp.open('POST', 'data/works.data.php', true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("data=" + JSON.stringify(Insertdata));
  }
};
navMokupRender.HeaderRender();
navMokupRender.SideBarNav();
navMokupRender.ServiceTabNav();
navMokupRender.ContactTabNav();